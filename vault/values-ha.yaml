server:
  ha:
    enabled: true
    replicas: 1
    raft:
      enabled: true

  dataStorage:
    enabled: true
    size: 5Gi
    storageClass: standard

  # âœ… This chart mounts "userconfig-<name>" at <path>/<name>
  # Your mistake earlier was using a relative path like "vault-tls"
  extraVolumes:
    - type: secret
      name: vault-tls
      path: /vault/userconfig

  extraEnvironmentVars:
    VAULT_CACERT: /vault/userconfig/vault-tls/ca.crt

  config: |
    ui = true
    disable_mlock = true

    listener "tcp" {
      address       = "0.0.0.0:8200"
      tls_cert_file = "/vault/userconfig/vault-tls/tls.crt"
      tls_key_file  = "/vault/userconfig/vault-tls/tls.key"
    }

    storage "raft" {
      path = "/vault/data"
    }

    service_registration "kubernetes" {}
