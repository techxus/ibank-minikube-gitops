nameOverride: user-service

image:
  repository: techxus/user-service
  tag: "1d37c1c4d42047ca7366e11dd95db04ff281b10e"

spring:
  profile: dev
  defaultSchema: user

probes:
  readinessPath: /api/v1/user/actuator/health/readiness
  livenessPath: /api/v1/user/actuator/health/liveness

monitoring:
  serviceMonitor:
    enabled: false

config:
  enabled: true
  applicationYaml: |
    spring:
      kafka:
        # âœ… Force Spring to bind bootstrap + protocol + mechanism from the mounted configtree keys
        # These keys are present as files under /mnt/secrets-store/msk/
        bootstrap-servers: ${spring.kafka.bootstrap-servers}
        properties:
          security.protocol: ${spring.kafka.properties.security.protocol}
          sasl.mechanism: ${spring.kafka.properties.sasl.mechanism}
          sasl.jaas.config: >-
            org.apache.kafka.common.security.scram.ScramLoginModule required
            username="${kafka.sasl.username}"
            password="${kafka.sasl.password}";

secretsStore:
  enabled: true
  region: us-east-1

  mountPath: "/mnt/secrets-store"
  mountPathPostgres: "/mnt/secrets-store/postgres"
  mountPathRedis: "/mnt/secrets-store/redis"
  mountPathMsk: "/mnt/secrets-store/msk"

  postgresSecretProviderClass: "ibank-postgres"
  redisSecretProviderClass: "ibank-redis"
  mskSecretProviderClass: "ibank-msk"

  datasourceUrl: "jdbc:postgresql://ibank-eks-dev-postgres.c9jlnhhcva7f.us-east-1.rds.amazonaws.com:5432/appdb"
  secretArn: arn:aws:secretsmanager:us-east-1:121897425968:secret:ibank-eks-dev/rds/postgres-HnfeI8
