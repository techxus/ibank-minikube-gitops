nameOverride: notification-service

# Value of tag will be overridden by GitHub Actions when the docker image is built
image:
  repository: techxus/notification-service
  tag: "585f9070718a6b6a0f7bf4c7b73ff7ab26bee788"

spring:
  profile: dev
  defaultSchema: notification

probes:
  enabled: true
  readinessPath: /api/v1/notification/actuator/health/readiness
  livenessPath: /api/v1/notification/actuator/health/liveness
  startupPath: /api/v1/notification/actuator/health/liveness

monitoring:
  serviceMonitor:
    enabled: false

config:
  enabled: true
  applicationYaml: |
    spring:
      kafka:
        # âœ… Force Spring to bind bootstrap + protocol + mechanism from the mounted configtree keys
        # These keys are present as files under /mnt/secrets-store/msk/
        bootstrap-servers: ${spring.kafka.bootstrap-servers}
        properties:
          security.protocol: ${spring.kafka.properties.security.protocol}
          sasl.mechanism: ${spring.kafka.properties.sasl.mechanism}
          sasl.jaas.config: >-
            org.apache.kafka.common.security.scram.ScramLoginModule required
            username="${kafka.sasl.username}"
            password="${kafka.sasl.password}";

secretsStore:
  enabled: true
  region: us-east-1

  mountPath: "/mnt/secrets-store"
  mountPathPostgres: "/mnt/secrets-store/postgres"
  mountPathRedis: "/mnt/secrets-store/redis"
  mountPathMsk: "/mnt/secrets-store/msk"

  postgresSecretProviderClass: "ibank-postgres"
  redisSecretProviderClass: "ibank-redis"
  mskSecretProviderClass: "ibank-msk"

  secretArn: arn:aws:secretsmanager:us-east-1:121897425968:secret:ibank-eks-dev/rds/postgres-HnfeI8
  datasourceUrl: "jdbc:postgresql://ibank-eks-dev-postgres.c9jlnhhcva7f.us-east-1.rds.amazonaws.com:5432/appdb"

